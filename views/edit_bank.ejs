<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Edit Question Bank - <%= bank.name %>
  </title>
  <link rel="stylesheet" href="/CSS/edit_bank.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
  <div class="edit-container">

    <!-- Top Navbar -->
    <header class="navbar">
      <a href="/index" class="logo">Exam Edge</a>
      <nav>
        <ul class="nav-links">
          <li><a href="/index">Home</a></li>
          <li><a href="#">Features</a></li>
          <li><a href="#">Pricing</a></li>
          <li>
            <button id="logoutBtn" class="btn-logout">Log Out</button>
          </li>
        </ul>
      </nav>
    </header>

    <!-- Wrapper: Sidebar + Content -->
    <div class="wrapper">

      <!-- Sidebar -->
      <aside class="sidebar collapsed" id="sidebar">
        <h2 class="sidebar-title">
          <i class="fas fa-user-shield"></i><span id="sidebar-username">Admin</span>
        </h2>
        <a href="/admin"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a>
        <a href="/admin/admin_users"><i class="fas fa-users"></i><span>Users</span></a>
        <a href="#"><i class="fas fa-list"></i><span>Tests</span></a>
        <a href="/admin/admin_question_bank" class="active"><i class="fas fa-book"></i><span>Question Bank</span></a>
        <a href="#"><i class="fas fa-chart-bar"></i><span>Analytics</span></a>
        <a href="#"><i class="fas fa-file-alt"></i><span>Reports</span></a>
        <a href="#"><i class="fas fa-envelope"></i><span>Messages</span></a>
        <a href="#"><i class="fas fa-cogs"></i><span>Settings</span></a>
        <a href="#"><i class="fas fa-headset"></i><span>Feedback</span></a>

        <!-- Collapse Button -->
        <button class="collapse-btn" onclick="toggleSidebar()">
          <i class="fas fa-angle-double-left"></i>
        </button>
      </aside>

      <!-- Secondary Sidebar -->
      <aside class="secondary-sidebar">
        <h2>
          <%= bank.name %>
        </h2>
        <ul>
          <li><a href="#" data-section="basic" class="active"><i class="fas fa-sliders-h"></i> Basic Settings</a></li>
          <li><a href="#" data-section="questions"><i class="fas fa-lightbulb"></i> Question Manager</a></li>
          <li><a href="#" data-section="sets"><i class="fas fa-layer-group"></i> Test Sets</a></li>
          <li><a href="#" data-section="access"><i class="fas fa-unlock-alt"></i> Test Access</a></li>
          <li><a href="#" data-section="marks"><i class="fas fa-stopwatch"></i> Marks & Time</a></li>
          <li><a href="#" data-section="grading"><i class="fas fa-star-half-alt"></i> Grading</a></li>
          <li><a href="#" data-section="summary"><i class="fas fa-file-circle-check"></i> Summary</a></li>
        </ul>


      </aside>

      <!-- Main Content -->
      <main class="content-area">

        <section id="basic" class="content-section active">
          <h3>Basic Settings</h3>
          <form id="basicForm">
            <label>Name :</label>
            <input type="text" id="bankName" value="<%= bank.name %>" required>
            <label>Subject :</label>
            <input type="text" id="subject" value="<%= bank.subject %>" required>
            <label>Description :</label>
            <textarea id="description"><%= bank.description || "" %></textarea>
            <button type="submit">üíæ Save</button>
          </form>
        </section>

        <section id="questions" class="content-section">

          <!-- Header + Buttons on same line -->
          <div class="question-header-row">
            <h3>Question Manager</h3>
            <div class="question-actions">
              <button id="changeOrderBtn" class="action-btn">üîÑ Change Question Order</button>
              <button id="addQuestionBtn" class="action-btn">‚ûï Add Question</button>
            </div>
          </div>

          <!-- Question List -->
          <div id="questionListContainer">
            <div id="questionList"></div>
          </div>

          <!-- Manual Question Form -->
          <form id="manualQuestionForm">
            <h4>Create New Question</h4>
            <input type="number" id="qNo" placeholder="Question Number" required />
            <textarea id="questionText" placeholder="Enter Question Text" required></textarea>
            <input type="text" id="optionA" placeholder="Option A" required />
            <input type="text" id="optionB" placeholder="Option B" required />
            <input type="text" id="optionC" placeholder="Option C" required />
            <input type="text" id="optionD" placeholder="Option D" required />

            <select id="rightOption" required>
              <option value="">Select Correct Option</option>
              <option value="A">A</option>
              <option value="B">B</option>
              <option value="C">C</option>
              <option value="D">D</option>
            </select>

            <input type="text" id="questionType" value="MCQ" readonly />
            <input type="text" id="subjectCategory" placeholder="Subject Category" required />
            <textarea id="solutionText" placeholder="Solution (optional)"></textarea>

            <button type="submit">üíæ Save Question</button>
          </form>

        </section>

        <section id="sets" class="content-section">
          <h3>Test Sets</h3>
          <form id="setsForm">
            <p><strong>Question Order :</strong></p>
            <label>
              <input type="radio" name="questionOrder" value="fixed" checked>
              Fixed Questions and Answers order as defined in Questions Manager
            </label>
            <br>
            <label>
              <input type="radio" name="questionOrder" value="random">
              Random Questions and Answers order
            </label>
            <br><br>
            <button type="submit">üíæ Save</button>
          </form>
        </section>

        <section id="access" class="content-section">
          <h3>Test Access</h3>
        </section>

        <section id="marks" class="content-section">
          <h3>Marks & Time Settings</h3>
        </section>

        <section id="grading" class="content-section">
          <h3>Grading</h3>
        </section>

        <section id="summary" class="content-section">
          <h3>Summary</h3>
        </section>

      </main>
    </div>

    <!-- Add Question Modal -->
    <div id="addQuestionModal" class="modal">
      <div class="modal-content">

        <!-- Close button -->
        <span class="close-btn">&times;</span>

        <!-- Main modal actions -->
        <div id="modalMainActions">
          <h3>Add New Question</h3>
          <button id="manualQuestionBtn" class="modal-action-btn">‚úèÔ∏è Create Question Manually</button>
          <button id="excelQuestionBtn" class="modal-action-btn">üìä Add Question from Excel</button>
        </div>

        <!-- Excel Upload Form -->
        <form id="excelUploadForm" style="display:none; flex-direction: column; margin-top: 1rem;">
          <label for="excelFile">Select Excel File:</label>
          <input type="file" id="excelFile" accept=".xlsx,.xls" required />
          <button type="submit" class="modal-action-btn">Upload</button>
          <button type="button" id="cancelExcelUpload" class="modal-action-btn">Cancel</button>
        </form>

      </div>
    </div>


    <script src="/JS/edit_bank.js"></script>
</body>

</html>